@startuml
!include style.iuml

participant ":__ReservationMapper__" as rMapper

participant ":__ReservationTDG__" as rTDG
participant "Reservation Table" as rTable
participant ":__ReservationIdentityMap__" as rIMap
participant ":__Reservation__" as reservation

[-> rMapper : findAllActive(date)

rMapper -> rTDG : findAllActive(date)
rTDG --> rTable : SELECT * FROM Reservation Table WHERE [...]
rTDG --> rMapper : activeReservations

loop reservation in activeReservations
	rMapper -> rIMap : get(reservation.id)
	rIMap --> rMapper : found

	create reservation
	rMapper -> reservation :  [not found] r := create()
	rMapper -> rIMap : add(r)
end

[<--rMapper : activeReservations

@enduml
